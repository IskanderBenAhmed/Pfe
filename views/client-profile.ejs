<!DOCTYPE html>
<html lang="en">

<head>
  <style>

.edit-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: rgb(20, 20, 20);
  border: none;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.164);
  cursor: pointer;
  transition-duration: 0.3s;
  overflow: hidden;
  position: relative;
  text-decoration: none !important;
}

.edit-svgIcon {
  width: 17px;
  transition-duration: 0.3s;
}

.edit-svgIcon path {
  fill: white;
}

.edit-button:hover {
  width: 120px;
  border-radius: 50px;
  transition-duration: 0.3s;
  background-color: rgb(0, 0, 0);
  align-items: center;
}

.edit-button:hover .edit-svgIcon {
  width: 20px;
  transition-duration: 0.3s;
  transform: translateY(60%);
  -webkit-transform: rotate(360deg);
  -moz-transform: rotate(360deg);
  -o-transform: rotate(360deg);
  -ms-transform: rotate(360deg);
  transform: rotate(360deg);
}

.edit-button::before {
  display: none;
  content: "Edit";
  color: white;
  transition-duration: 0.3s;
  font-size: 2px;
}

.edit-button:hover::before {
  display: block;
  padding-right: 10px;
  font-size: 13px;
  opacity: 1;
  transform: translateY(0px);
  transition-duration: 0.3s;
}


.container{
    width: 100%;
    height: 100vh;
    background: #e3ebfe;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 10px;
}

button{
    width: 200px;
    height: 60px;
    border: none;
    outline: none;
    background: #2f2f2f;
    color: #fff;
    font-size: 22px;
    border-radius: 30px; /* Adjusted to half of the button's height */

    text-align: center;
    box-shadow: 0 6px 20px -5px rgba(0,0,0,0.4);
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

.check-box{
    width: 60px;
    height: 60px;
    border-radius: 40px;
    box-shadow: 0 0 12px -2px rgba(0,0,0,0.5);
    position: absolute;
    top: 0;
    right: -40px;
    opacity: 0;
}

.check-box svg{
    width: 50px;
    margin: 7px;
}

svg path{  
    stroke-width: 3;
    stroke: #fff;
    stroke-dasharray: 34;
    stroke-dashoffset: 34;
    stroke-linecap: round;
}

.active{
    background: #43de40;
    transition: 1s;
}

.active .check-box{
    right: 0;
    opacity: 1;
    transition: 1s;
}

.active p{
    margin-right: 60px;
    transition: 1s;
}

.active svg path{
    stroke-dashoffset: 0;
    transition: 1s;
    transition-delay: 1s;
}

  </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="main-template/img/icon.png"  rel="icon">
  <link href="main-template/img/apple-touch-icon.png" rel="apple-touch-icon">
  <title>
   Client profile
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/argon-dashboard.css?v=2.0.4" rel="stylesheet" />
</head>

<body class="g-sidenav-show bg-gray-100">
  <div class="position-absolute w-100 min-height-300 top-0" style="background-image: url('https://images6.alphacoders.com/987/987870.jpg'); background-position-y: 25%; background-size: cover;">
  </div>
  <aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 " id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0"   >
        <span class="ms-1 font-weight-bold">The Hive Hub</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link " href="/suggestion">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Home page</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/my-projects">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-calendar-grid-58 text-warning text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">My projects</span>
          </a>
        </li>
     
  
        
        <li class="nav-item">
          <a class="nav-link active" href="/client-profile">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-single-02 text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Profile</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/login">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-single-copy-04 text-warning text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Sign In</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/register">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-collection text-info text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Sign Up</span>
          </a>
        </li>
      </ul>
    </div>
  
  </aside>
  <div class="main-content position-relative max-height-vh-100 h-100">
    <!-- Navbar -->
   
    <!-- End Navbar -->
    <div class="card shadow-lg mx-4 card-profile-bottom">
      <div class="card-body p-3">
        <div class="row gx-4">
          
          <div class="col-auto my-auto">
            <div class="h-100">
              <h5 class="mb-1">
                <%= username %> <!-- Replace "Sayo Kravits" with <%= username %> -->
              </h5>
              <p class="mb-0 font-weight-bold text-sm">
                <%= role %>
              </p>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
            <div class="nav-wrapper position-relative end-0">
              <ul class="nav nav-pills nav-fill p-1" role="tablist">
               
                <li class="nav-item">
                  <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center" href="/logout" role="tab" aria-selected="false">
                    <i class="ni ni-user-run"></i>
                    <span class="ms-2">Logout</span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-md-8">
          <div class="card">
            <div class="card-header pb-0">
              <p>Edit Profile           </p>
              <div class="d-flex align-items-center">
                
                <button  id="editButton" class="edit-button">
                  <svg class="edit-svgIcon" viewBox="0 0 512 512">
                                    <path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"></path>
                                  </svg>
                </button>



              </div>
            </div>
            <div class="card-body">
              <p class="text-uppercase text-sm">User Information</p>
              <div class="row">
                <div class="col-md-6">

                  
                  <div class="form-group">
                    <label for="username" class="form-control-label">Username</label>
                    <input id="username" class="form-control" type="text" value="<%=  username %>" disabled>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="email" class="form-control-label">Email address</label>
                    <input id="email" class="form-control" type="email" value="<%= userProfile.email%> " disabled>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="firstname" class="form-control-label">First name</label>
                    <input id="firstname" class="form-control" type="text" value="<%= userProfile.Firstname %>" disabled>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="lastname" class="form-control-label">Last name</label>
                    <input id="lastname" class="form-control" type="text" value="<%= userProfile.Lastname %>" disabled>
                  </div>
                </div>
              </div>
              <hr class="horizontal dark">
              <p class="text-uppercase text-sm">Contact Information</p>
              <div class="row">
                
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="city" class="form-control-label">City</label>
                    <input id="city" class="form-control" type="text" value="<%= userProfile.city %>" disabled>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="country" class="form-control-label">Country</label>
                    <input id="country" class="form-control" type="text" value="<%= userProfile.country %>" disabled>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="postal_code" class="form-control-label">Postal code</label>
                    <input id="postal_code" class="form-control" type="text" value="<%= userProfile.postal_code %>" disabled>
                  </div>
                </div>
              </div>
              <hr class="horizontal dark">
              <p class="text-uppercase text-sm">About me</p>
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <label for="about_me" class="form-control-label">About me</label>
                    <input id="about_me" class="form-control" type="text" value="<%= userProfile.About_me %>" disabled>
                  </div>
                </div>
              </div>
              <button id="saveButton" class="btn btn-primary">Save</button>
            </div>
          </div>
        </div>
        

        
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

        <!-- ... Rest of your HTML code ... -->
        
        <script>
          const editButton = document.getElementById('editButton');
          const saveButton = document.getElementById('saveButton');
          const formInputs = document.querySelectorAll('.form-control');
        
          // Function to show the success alert
       // Function to show the success alert
function showSuccessAlert() {
  Swal.fire({
    icon: 'success',
    title: 'Profile Saved!',
    text: 'Your profile has been successfully saved.',
    timer: 3000, // Auto close after 3 seconds
    timerProgressBar: true,
    showConfirmButton: false,
  });
}


        
          // Add event listener to the Edit button
          editButton.addEventListener('click', () => {
            formInputs.forEach(input => {
              input.removeAttribute('disabled'); // Remove the disabled attribute from all form inputs
            });
          });
        
          // Add event listener to the Save button
          saveButton.addEventListener('click', () => {
            const profileData = {
              username: document.getElementById('username').value,
              email: document.getElementById('email').value,
              Firstname: document.getElementById('firstname').value,
              Lastname: document.getElementById('lastname').value,
              city: document.getElementById('city').value,
              country: document.getElementById('country').value,
              postal_code: document.getElementById('postal_code').value,
              About_me: document.getElementById('about_me').value
            };
        
            fetch('/save-profile', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(profileData)
            })
              .then(response => response.json())
              .then(data => {
                if (data.success) {
                  // Show the success alert
                  showSuccessAlert();
                } else {
                  // Display an error message to the user
                  Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Failed to save profile.',
                  });
                }
              })
              .catch(error => {
                console.error('Failed to save profile:', error);
                // Display an error message to the user
                Swal.fire({
                  icon: 'error',
                  title: 'Error',
                  text: 'Failed to save profile.',
                });
              });
          });
        
          // Change the button text to "Saved!" when the Save button is clicked
          saveButton.onclick = () => {
            saveButton.innerHTML = "Saved!";
            saveButton.classList.add("active");
          };
        </script>
        
        <div class="col-md-4">
          
        </div>
      </div>
   
    </div>
  </div>

  </div>
  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/argon-dashboard.min.js?v=2.0.4"></script>
</body>

</html>